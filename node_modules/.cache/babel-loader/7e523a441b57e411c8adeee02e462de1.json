{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Matheus\\\\Desktop\\\\chat\\\\src\\\\Context\\\\GlobalContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport socketIOClient, { io } from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GlobalContext = /*#__PURE__*/React.createContext(null);\nconst SOCKET_SERVER_URL = 'http://localhost:3333';\nconst NEW_CHAT_MESSAGE_EVENT = 'newChatMessage';\n\nconst MensagensProvider = ({\n  children\n}) => {\n  _s();\n\n  const [Mensagens, setMensagens] = useState([]);\n  const [UserAuth, setUserAuth] = useState(false);\n  const [UserInfo, setUserInfo] = useState([]);\n  const socketRef = useRef();\n  const socket = io();\n  useEffect(() => {\n    const {\n      userID,\n      Name,\n      AvatarUrl\n    } = UserInfo;\n    socketRef.current = socketIOClient(SOCKET_SERVER_URL);\n\n    if (UserAuth) {\n      socketRef.current.emit('Join', {\n        userID,\n        Name,\n        AvatarUrl\n      });\n      socketRef.current.on('UserJoin', User => {\n        console.log(User);\n      });\n      socketRef.current.on('disconnect', () => {\n        socketRef.current.emit('disconnect', { ...UserInfo\n        });\n      });\n    }\n\n    socketRef.current.on(NEW_CHAT_MESSAGE_EVENT, message => {\n      setMensagens(Mensagens => [...Mensagens, message]);\n    });\n  }, [UserAuth]);\n\n  const addMensagem = data => {\n    const timestamp = Date.now();\n    const fomartedtimestamp = new Intl.DateTimeFormat('pt-BR', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit'\n    }).format(timestamp);\n    console.log(fomartedtimestamp);\n    const {\n      Name,\n      userID\n    } = UserInfo;\n    const newMessage = {\n      id: uuidv4(),\n      userName: Name,\n      userID: userID,\n      mensagem: data,\n      timestamp: fomartedtimestamp\n    };\n    socketRef.current.emit(NEW_CHAT_MESSAGE_EVENT, { ...newMessage\n    });\n  };\n\n  const AuthRequest = response => {\n    console.log(response);\n    const {\n      profileObj\n    } = response;\n    const object = {\n      userID: profileObj.googleId,\n      Name: profileObj.name,\n      AvatarUrl: profileObj.imageUrl\n    };\n    setUserInfo(object);\n    setUserAuth(true);\n  };\n\n  const LogoutRequest = () => {\n    setUserAuth(false);\n    setUserInfo([]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(GlobalContext.Provider, {\n    value: {\n      Mensagens,\n      addMensagem,\n      UserAuth,\n      AuthRequest,\n      UserInfo,\n      LogoutRequest\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MensagensProvider, \"rjttaOAi0mE6NgSiirQywdVvQJw=\");\n\n_c = MensagensProvider;\nexport default MensagensProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"MensagensProvider\");","map":{"version":3,"sources":["C:/Users/Matheus/Desktop/chat/src/Context/GlobalContext.js"],"names":["React","useEffect","useRef","useState","v4","uuidv4","socketIOClient","io","GlobalContext","createContext","SOCKET_SERVER_URL","NEW_CHAT_MESSAGE_EVENT","MensagensProvider","children","Mensagens","setMensagens","UserAuth","setUserAuth","UserInfo","setUserInfo","socketRef","socket","userID","Name","AvatarUrl","current","emit","on","User","console","log","message","addMensagem","data","timestamp","Date","now","fomartedtimestamp","Intl","DateTimeFormat","year","month","day","hour","minute","second","format","newMessage","id","userName","mensagem","AuthRequest","response","profileObj","object","googleId","name","imageUrl","LogoutRequest"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport socketIOClient, { io } from 'socket.io-client'\r\nexport const GlobalContext = React.createContext(null)\r\n\r\n\r\nconst SOCKET_SERVER_URL = 'http://localhost:3333';\r\nconst NEW_CHAT_MESSAGE_EVENT = 'newChatMessage';\r\nconst MensagensProvider = ({ children }) => {\r\n    const [Mensagens, setMensagens] = useState([])\r\n    const [UserAuth, setUserAuth] = useState(false)\r\n    const [UserInfo, setUserInfo] = useState([])\r\n    const socketRef = useRef()\r\n    const socket = io()\r\n    useEffect(() =>{\r\n        const {userID, Name, AvatarUrl} = UserInfo\r\n        socketRef.current = socketIOClient(SOCKET_SERVER_URL)\r\n        if(UserAuth){\r\n            socketRef.current.emit('Join', {userID, Name, AvatarUrl})\r\n            socketRef.current.on('UserJoin', (User) =>{\r\n                console.log(User)\r\n            } )\r\n            socketRef.current.on('disconnect', () =>{\r\n                socketRef.current.emit('disconnect', {...UserInfo})\r\n            })\r\n        }\r\n        socketRef.current.on(NEW_CHAT_MESSAGE_EVENT, (message) =>{\r\n            setMensagens((Mensagens) => [...Mensagens, message])\r\n        })\r\n\r\n    },[UserAuth])\r\n    const addMensagem = (data) => {\r\n        const timestamp = Date.now()\r\n        const fomartedtimestamp = new Intl.DateTimeFormat('pt-BR', {year:'numeric', month: '2-digit', day: '2-digit', hour:'2-digit', minute:'2-digit', second:'2-digit'}).format(timestamp);\r\n        console.log(fomartedtimestamp)\r\n        const {Name, userID} = UserInfo;\r\n        const newMessage = {\r\n            id: uuidv4(),\r\n            userName: Name,\r\n            userID: userID,\r\n            mensagem: data,\r\n            timestamp: fomartedtimestamp\r\n        };\r\n        socketRef.current.emit(NEW_CHAT_MESSAGE_EVENT, {\r\n            ...newMessage\r\n        })\r\n    }\r\n    const AuthRequest = (response) => {\r\n        console.log(response)\r\n        const { profileObj } = response\r\n        const object = {\r\n            userID:profileObj.googleId,\r\n            Name: profileObj.name,\r\n            AvatarUrl: profileObj.imageUrl,\r\n        }\r\n        setUserInfo(object)\r\n        setUserAuth(true)\r\n    }\r\n    const LogoutRequest = () =>{\r\n        setUserAuth(false)\r\n        setUserInfo([])\r\n    }\r\n    return (\r\n        <GlobalContext.Provider value={{ Mensagens, addMensagem, UserAuth, AuthRequest, UserInfo, LogoutRequest }} >\r\n            {children}\r\n        </GlobalContext.Provider>\r\n    );\r\n}\r\n\r\nexport default MensagensProvider;"]},"metadata":{},"sourceType":"module"}